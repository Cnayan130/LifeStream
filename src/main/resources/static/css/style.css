/*
 * ===================================================================
 * LifeStream Style (v3) - 紧凑卡片 (Compact Card) 版
 *
 * 理念:
 * - 紧凑 (Compact): 减小间距和内边距
 * - 扁平卡片 (Flat Card): 导航、按钮、卡片均采用块状/卡片式设计
 * - 品牌色: #191970 (漆海蓝)
 * - 字体: Roboto, Noto Sans SC (思源黑体)
 * ===================================================================
 */

/* * ===================================================================
 * 1. 设计系统与主题变量
 * ===================================================================
 */
:root {
    /* 主色调 (漆海蓝) */
    --primary-color: #191970;
    --primary-hover: #2c2c94;
    --primary-light: #f0f0f9; /* [更改] 更淡的背景色 */

    /* 文本颜色 (Light Mode) */
    --text-color: #1f2937;
    --text-muted: #6b7280;
    --text-inverted: #ffffff;

    /* 背景颜色 (Light Mode) */
    --bg-color: #f3f4f6;      /* [更改] Gray 100, 营造更紧凑的背景 */
    --surface-color: #ffffff;
    --border-color: #e5e7eb;

    /* 通用 */
    --danger-color: #ef4444;
    --success-color: #22c55e;
    --warning-color: #f59e0b;

    /* 字体 */
    --font-sans: 'Roboto', 'Noto Sans SC', '思源黑体', -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
    --font-mono: 'Fira Code', SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

    /* [更改] 紧凑型圆角和扁平阴影 */
    --border-radius-sm: 0.25rem;
    --border-radius: 0.375rem; /* [更改] 减小默认圆角 */
    --border-radius-lg: 0.5rem;
    --shadow: 0 2px 4px rgba(0, 0, 0, 0.05); /* [更改] 更微妙的扁平阴影 */
    --transition: all 0.2s ease-in-out;
}

html[data-theme="dark"] {
    --primary-color: #5858d6;
    --primary-hover: #7979f2;
    --primary-light: #10103e;

    --text-color: #f3f4f6;
    --text-muted: #9ca3af;
    --text-inverted: #111827;

    --bg-color: #111827;
    --surface-color: #1f2937;
    --border-color: #374151;

    --danger-color: #f87171;
    --success-color: #4ade80;
    --warning-color: #facc15;
}

/* * ===================================================================
 * 2. 全局基础样式
 * ===================================================================
 */
body {
    font-family: var(--font-sans);
    background-color: var(--bg-color);
    color: var(--text-color);
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    line-height: 1.5; /* [更改] 缩小行高 */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* [重要] main 标签不再需要任何 padding */
main {
    flex: 1 0 auto;
}

h1, h2, h3, h4, h5, h6 {
    font-weight: 700;
    line-height: 1.3;
    margin-bottom: 1rem;
    color: var(--text-color);
}
a {
    color: var(--primary-color);
    text-decoration: none;
    transition: var(--transition);
}
a:hover {
    color: var(--primary-hover);
}

/* * ===================================================================
 * 3. 布局组件 (Navbar, Footer) - 优化版
 * ===================================================================
 */

/* [重构] 导航栏 (扁平、吸顶) */
.navbar {
    background-color: var(--surface-color);
    box-shadow: var(--shadow);
    padding: 0.5rem 0;
}

.navbar-brand {
    font-weight: 800;
    font-size: 1.5rem;
    color: var(--text-color) !important;
    margin-right: 1.5rem;
}
.navbar-brand i {
    color: var(--primary-color);
}
.user-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    object-fit: cover;
}

/* [核心] 导航栏卡片化 (仅限主导航) */
.navbar-nav.me-auto .nav-link {
    font-weight: 600;
    color: var(--text-muted);
    background-color: var(--bg-color);
    padding: 0.5rem 1rem;
    border-radius: var(--border-radius);
    margin: 0 0.25rem;
    transition: var(--transition);
}

.navbar-nav.me-auto .nav-link:hover {
    background-color: var(--primary-light);
    color: var(--primary-color);
}
.navbar-nav.me-auto .nav-item.active .nav-link {
    background-color: var(--primary-color);
    color: var(--text-inverted);
}

/* [新增] 确保用户下拉菜单和登录链接不受卡片样式影响 */
.navbar-nav:not(.me-auto) .nav-link {
    color: var(--text-muted);
    font-weight: 600;
    background-color: transparent;
    padding: 0.5rem 0.5rem;
}
.navbar-nav:not(.me-auto) .nav-link:hover {
    color: var(--primary-color);
    background-color: transparent;
}

/* * [关键优化] 搜索表单样式
 */

/* 1. 移除 <form> 标签的默认外边距，这是导致错位的元凶之一 */
.navbar form {
    margin-bottom: 0;
}

/* 2. 你的 .input-group 样式是完美的，保持不变。
      HTML 必须匹配这个结构！ */
.navbar .input-group .form-control {
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    /* [新增] 确保字体大小和内边距与按钮/链接一致 */
    font-size: 0.95rem;      /* 匹配 .form-control */
    padding: 0.5rem 0.8rem;  /* 匹配 .form-control */
}

/* 3. 修复 .input-group-sm 带来的高度不一致问题 */

/* 强制 .form-control 匹配你的紧凑设计 */
.navbar .input-group-sm > .form-control {
    padding: 0.5rem 0.8rem;   /* 匹配 .form-control 全局设置 */
    font-size: 0.95rem;      /* 匹配 .form-control 全局设置 */
    line-height: 1.5;        /* [新增] 锁定行高以确保对齐稳定 */
}
/* 强制 .btn 匹配你的紧凑设计 */
.navbar .input-group-sm > .btn {
    padding: 0.5rem 1rem;    /* 匹配 .btn 全局设置 */
    font-size: 0.9rem;       /* 匹配 .btn 全局设置 */
    line-height: 1.5;        /* [新增] 锁定行高以确保对齐稳定 */
}


.navbar .input-group .form-control:focus {
    background-color: var(--surface-color);
    border-color: var(--primary-color);
    box-shadow: none;
}
html[data-theme="dark"] .navbar .input-group .form-control {
    background-color: var(--bg-color);
}

/* 页脚 (扁平化) - 保持不变 */
footer {
    background-color: var(--surface-color);
    color: var(--text-muted);
    padding: 2rem 0;
    font-size: 0.9rem;
    border-top: 1px solid var(--border-color);
}
footer .footer-links a {
    color: var(--text-muted);
    text-decoration: none;
}
footer .footer-links a:hover {
    color: var(--primary-color);
}
footer p {
    margin-bottom: 0;
}

/*
 * [新增] 个人资料链接（头像+用户名）的样式
 * * 目标：使其高度与紧凑的搜索框 (input-group-sm) 保持一致
 */

/* * [修复]
 * 使用更高优先级的选择器 (0,2,3) 来覆盖
 * 默认的 .navbar-nav:not(.me-auto) .nav-link (0,2,2)
 */
.navbar-nav .nav-link.profile-link {
    /* * 你的 .user-avatar 是 32px 高
     * 你的搜索框按钮高度约 39.6px
     * 你的搜索框输入框高度约 40.8px
     * * 我们需要将总高度控制在 40px 左右。
     * (0.25rem * 2) + 32px = 4px + 4px + 32px = 40px
     * 这与搜索框的高度在视觉上是匹配的。
     */
    padding-top: 0.25rem;
    padding-bottom: 0.25rem;
}

/* * ===================================================================
 * 4. 统一组件 (Card, Button, Form)
 * ===================================================================
 */

/* [重构] 扁平化卡片 */
.card {
    background-color: var(--surface-color);
    border: none; /* [更改] 移除边框 */
    border-radius: var(--border-radius);
    box-shadow: var(--shadow); /* 依赖阴影 */
    transition: var(--transition);
    transform: translateY(0); /* [新增] 预激活 transform */
    overflow: hidden;
    height: 100%;
}
.card:hover {
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08); /* 悬停时阴影变大 */
    transform: translateY(-2px);
}
.card-img-top {
    height: 200px; /* [更改] 更紧凑 */
    object-fit: cover;
}
.card-body {
    padding: 1.25rem; /* [更改] 更紧凑 */
}
.card-title {
    font-size: 1.25rem; /* [更改] 更紧凑 */
}
.card-text {
    font-size: 0.95rem; /* [更改] 更紧凑 */
}

/* [重构] 块状/卡片式按钮 */
.btn {
    padding: 0.5rem 1rem; /* [更改] 更紧凑的内边距 */
    font-weight: 600;
    border-radius: var(--border-radius-sm);
    transition: all 0.1s ease-in-out; /* [更改] 更快的过渡 */
    text-decoration: none !important;
    cursor: pointer;
    border: 1px solid transparent;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

/* [重构] 主按钮 (实色) */
.btn-primary {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
    color: var(--text-inverted);
}
.btn-primary:hover {
    background-color: var(--primary-hover);
    border-color: var(--primary-hover);
    color: var(--text-inverted);
    transform: translateY(-1px);
}

/* [重构] 按钮 "按下" 效果 */
.btn:active {
    transform: scale(0.98);
    box-shadow: none;
}

.btn-outline-primary {
    background-color: transparent;
    border-color: var(--primary-color);
    color: var(--primary-color);
}
.btn-outline-primary:hover {
    background-color: var(--primary-color);
    color: var(--text-inverted);
}

/* [重构] 链接按钮 (用于登录) */
.btn-link {
    color: var(--text-muted);
    font-weight: 600;
    text-decoration: none;
    background-color: transparent;
    border-color: transparent;
    box-shadow: none;
}
.btn-link:hover {
    color: var(--primary-color);
}

/* [重构] 紧凑型表单 */
.form-label {
    font-weight: 600;
    margin-bottom: 0.3rem; /* [更改] 更紧凑 */
    font-size: 0.9rem;
}
.form-control {
    background-color: var(--surface-color); /* [更改] 默认白色 */
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    padding: 0.5rem 0.8rem; /* [更改] 更紧凑 */
    transition: var(--transition);
    color: var(--text-color);
    font-size: 0.95rem;
}
.form-control:focus {
    color: var(--text-color);
    background-color: var(--surface-color);
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px var(--primary-light);
    outline: none;
}
.form-text {
    color: var(--text-muted);
    font-size: 0.85rem; /* [更改] 更紧凑 */
}
.form-check-input:checked {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
}

/* 适配暗黑模式的表单 */
html[data-theme="dark"] .form-control {
    background-color: var(--bg-color); /* 暗模式下用深色 */
}
html[data-theme="dark"] .form-control:focus {
    background-color: var(--bg-color);
}

/* [重构] 紧凑型浮动标签 */
.form-floating > .form-control {
    padding-top: 1.25rem;
    padding-bottom: 0.25rem;
    height: calc(2.8rem + 2px); /* [更改] 紧凑高度 */
}
.form-floating > label {
    padding: 0.5rem 0.8rem; /* [更改] 紧凑内边距 */
    color: var(--text-muted);
}
.form-floating > .form-control:focus ~ label,
.form-floating > .form-control:not(:placeholder-shown) ~ label {
    color: var(--primary-color);
    opacity: 1;
    transform: scale(0.85) translateY(-0.6rem) translateX(0.15rem);
}

/* * ===================================================================
 * 5. 页面特定样式 (Post, Auth, Profile)
 * ===================================================================
 */

/* 文章内容 (继承新的紧凑行高) */
.post-content {
    font-size: 1.05rem; /* [更改] 更紧凑 */
    line-height: 1.7;
}
/* ... (所有 .post-content h2, h3, blockquote 等样式保留) ... */

/* 标签 (继承新的按钮圆角) */
.tag-badge {
    display: inline-block;
    background-color: var(--primary-light);
    color: var(--primary-color);
    font-weight: 600;
    font-size: 0.8rem;
    padding: 0.3rem 0.8rem; /* [更改] 更紧凑 */
    border-radius: var(--border-radius-sm); /* [更改] 卡片式圆角 */
    transition: var(--transition);
    text-decoration: none !important;
}
.tag-badge:hover {
    background-color: var(--primary-color);
    color: var(--text-inverted);
}

/* 认证/登录页面 (继承新的卡片样式) */
.auth-container {
    max-width: 420px; /* [更改] 更紧凑 */
    margin: 2rem auto;
}
.auth-logo {
    font-size: 2.5rem; /* [更改] 更紧凑 */
    margin-bottom: 1.5rem;
    color: var(--primary-color);
}
.auth-card .card-body {
    padding: 2rem; /* [更改] 更紧凑 */
}

/* 个人资料/密码页面 (继承新的卡片头样式) */
.profile-form-container,
.password-form-container {
    max-width: 680px; /* [更改] 更紧凑 */
    margin: 2rem auto;
}
.profile-card-header,
.password-card-header {
    background: var(--primary-color); /* [更改] 移除渐变, 使用实色 */
    color: var(--text-inverted);
    padding: 1.25rem; /* [更改] 更紧凑 */
}

/* ... (所有其他页面样式, 如 .gallery-grid, .pagination 等, 都会自动继承新的紧凑/扁平样式) ... */
.pagination { margin-top: 2rem; }
.page-link {
    padding: 0.4rem 0.8rem; /* [更改] 更紧凑 */
    font-weight: 600;
    border-radius: var(--border-radius-sm);
    margin: 0 0.15rem;
    border: 1px solid var(--border-color);
    background-color: var(--surface-color);
    color: var(--text-color);
}
.page-item.active .page-link {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
    color: var(--text-inverted);
}
.page-item:not(.active) .page-link:hover {
    color: var(--primary-color);
    background-color: var(--primary-light);
}

/* [新增] 认证表单的密码显示/隐藏 toggle
 * (适配你的 register.html)
 */
.password-toggle {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;

    /* 垂直居中图标 */
    display: flex;
    align-items: center;
    padding: 0 1.25rem; /* 增加点击区域 */

    z-index: 100; /* 确保在 input 之上 (在 label 之下) */
    cursor: pointer;
    color: var(--text-muted);
    transition: var(--transition);
}

.password-toggle:hover {
    color: var(--text-color);
}

/* * [重要]
 * 你的 .form-floating > .form-control
 * 需要为 'eye' icon 留出空间，否则文字会跑到图标下面
 */
.form-floating > .form-control {
    /* 默认 padding-right 是 0.75rem, 我们需要更多 */
    padding-right: 3.5rem;
}

/* * ===================================================================
 * 6. 页面特定: 主页 (Homepage)
 * ===================================================================
 */

/* [新增] 英雄横幅区域 */
.hero-section {
    /* 使用你的品牌主色 */
    background-color: var(--primary-color);
    color: var(--text-inverted);
    padding: 4rem 0; /* 增加垂直空间感 */
    text-align: left;
}

.hero-title {
    font-size: 2.75rem; /* [更改] 标题更大 */
    font-weight: 800;
    color: white;
    margin-bottom: 0.5rem;
}

.hero-subtitle {
    font-size: 1.25rem;
    /* [更改] 使用半透明的白色，更柔和 */
    color: rgba(255, 255, 255, 0.8);
    margin-bottom: 2rem;
}

/* [新增] 确保 "浏览文章" 按钮在深色背景上更突出 */
.hero-section .btn-light {
    font-weight: 600;
    color: var(--primary-color); /* 按钮文字使用品牌色 */
}

/* [新增] 主页的章节标题 */
.section-title {
    font-size: 1.75rem;
    font-weight: 700;
    margin-bottom: 2.5rem; /* 标题和内容的间距 */
    position: relative;
}

/* [新增] 相册卡片的占位符 */
.album-placeholder {
    width: 100%;
    height: 120px; /* 给一个固定高度 */
    display: flex;
    align-items: center;
    justify-content: center;
    /* [更改] 使用你主题中的浅灰色背景 */
    background-color: var(--bg-color);
    border-radius: var(--border-radius-sm);
    transition: var(--transition);
}

.album-placeholder i {
    color: var(--text-muted); /* 图标使用柔和的颜色 */
    transition: var(--transition);
}

/* [新增] 当鼠标悬停在卡片上时，给占位符一个交互效果 */
.card:hover .album-placeholder {
    background-color: var(--primary-light);
}
.card:hover .album-placeholder i {
    color: var(--primary-color);
}

/* [新增] 标签云容器 */
.tag-cloud {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    /* [新增] 使用 gap 属性轻松添加间距 */
    gap: 0.75rem;
}

/* * ===================================================================
 * 7. 布局优化 (全宽/左对齐风格)
 * ===================================================================
 */

/* [新增] 为全宽布局的 .container-fluid 添加舒适的内边距 */
.navbar .container-fluid,
footer .container-fluid,
.main-content-fluid { /* 这个类用于你的主页内容 */
    width: 100%;

    /* [关键] 定义你的“左对齐”边距 */
    padding-left: 2rem;
    padding-right: 2rem;

    /* [可选]
       如果你不希望内容在超宽屏幕上无限拉伸，
       可以设置一个最大宽度，但它仍然会保持左对齐。
    max-width: 1800px;
    margin-left: 0;
    margin-right: 0;
    */
}

/* [新增] 在小屏幕（手机）上，减小内边距，留出更多空间 */
@media (max-width: 768px) {
    .navbar .container-fluid,
    footer .container-fluid,
    .main-content-fluid {
        padding-left: 1rem;
        padding-right: 1rem;
    }
}

/* [新增] 为全宽布局的 .container-fluid 添加舒适的内边距 */
.navbar .container-fluid,
footer .container-fluid,
.main-content-fluid { /* 这个类用于你的主页内容 */
    width: 100%;
    padding-left: 2rem;
    padding-right: 2rem;
}

/* [新增] 在小屏幕（手机）上，减小内边距 */
@media (max-width: 768px) {
    .navbar .container-fluid,
    footer .container-fluid,
    .main-content-fluid {
        padding-left: 1rem;
        padding-right: 1rem;
    }
}